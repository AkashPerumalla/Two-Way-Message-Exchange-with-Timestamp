# HC-12 Communication with NodeMCU: Two-Way Message Exchange with Timestamp

This project demonstrates two-way communication between two NodeMCU devices using HC-12 wireless modules and Wi-Fi. Each device can send and receive messages with timestamps generated by an NTP client. The message format includes the current time in Indian Standard Time (IST), and the communication occurs via the HC-12 modules.

## Features

- **Wi-Fi Connection**: Both NodeMCU devices connect to the same Wi-Fi network for NTP synchronization.
- **HC-12 Communication**: The HC-12 modules allow wireless communication between the two NodeMCU devices.
- **Timestamped Messages**: Each message sent includes a timestamp in the format `HH:MM:SS IST` to show when the message was sent.
- **Two-Way Communication**: Both NodeMCU devices can send and receive messages with timestamps.

## Requirements

- **Hardware**:
  - 2 x NodeMCU ESP8266 (or compatible boards)
  - 2 x HC-12 wireless modules
  - Jumper wires
  - Breadboard (optional for prototyping)

- **Software**:
  - Arduino IDE
  - Libraries:
    - `ESP8266WiFi`
    - `NTPClient`
    - `WiFiUdp`
    - `SoftwareSerial`

## Circuit Diagram

### NodeMCU to HC-12 Wiring
1. **NodeMCU Pinout**:
   - D1 (GPIO5) → TX (HC-12)
   - D2 (GPIO4) → RX (HC-12)
   - GND → GND
   - 3.3V → VCC (HC-12)

2. **Power Supply**:
   - Ensure that both the NodeMCU and HC-12 are powered properly with 3.3V.
   - Do not connect the HC-12 VCC pin directly to 5V, as the module is designed for 3.3V.

### NTP Client Setup
The NodeMCU uses the NTP Client library to synchronize the system time with a remote NTP server. The project uses the `pool.ntp.org` server and adjusts the time for the Indian Standard Time (IST) zone.

## Setup Instructions

### 1. Clone the Repository

Clone this repository to your local machine:

```bash
git clone https://github.com/yourusername/HC-12-NodeMCU-Communication.git
cd HC-12-NodeMCU-Communication
```

### 2. Install Arduino Libraries

Ensure that you have the following libraries installed in your Arduino IDE:
- `ESP8266WiFi`
- `NTPClient`
- `WiFiUdp`
- `SoftwareSerial`

To install these, open the Arduino IDE, go to **Sketch > Include Library > Manage Libraries**, and search for the libraries.

### 3. Upload Code to NodeMCU

Upload the **Sender** and **Receiver** code to their respective NodeMCU boards. Here's how:

#### Sender Code:
- Upload the code to the first NodeMCU. This device will send messages with timestamps.
- Connect to the Serial Monitor and send messages.

#### Receiver Code:
- Upload the code to the second NodeMCU. This device will receive messages, append timestamps, and send them back.
- Open the Serial Monitor to see the received and sent messages.

### 4. Ensure the Devices Are in Range

Make sure both NodeMCU devices are within range of the HC-12 modules and that they are configured to communicate at the same baud rate (9600 bps).

## Code Overview

### Sender Code

```cpp
#include <ESP8266WiFi.h>
#include <NTPClient.h>
#include <WiFiUdp.h>
#include <SoftwareSerial.h>

// Wi-Fi credentials
const char* ssid = "<SSID>";
const char* password = "<PASSWORD>";

// NTP Client Setup
WiFiUDP udp;
NTPClient timeClient(udp, "pool.ntp.org", 19800, 3600000);

// HC-12 communication pins
const int hc12_tx = 5;
const int hc12_rx = 4;

SoftwareSerial hc12(hc12_rx, hc12_tx); // Create SoftwareSerial object for HC-12

void setup() {
  Serial.begin(115200);
  hc12.begin(9600);

  WiFi.begin(ssid, password);
  while (WiFi.status() != WL_CONNECTED) {
    delay(1000);
    Serial.println("Connecting to WiFi...");
  }

  timeClient.begin();
  Serial.println("NodeMCU A ready to send messages.");
}

void loop() {
  timeClient.update();

  if (Serial.available()) {
    String message = Serial.readStringUntil('\n');
    String currentTime = timeClient.getFormattedTime();
    String timestampedMessage = "Sender [" + currentTime + " IST]: " + message;

    hc12.println(timestampedMessage);
    Serial.println("Sent: " + timestampedMessage);
  }
  delay(100);
}
```

### Receiver Code

```cpp
#include <ESP8266WiFi.h>
#include <NTPClient.h>
#include <WiFiUdp.h>
#include <SoftwareSerial.h>

// Wi-Fi credentials
const char* ssid = "<SSID>";
const char* password = "<PASSWORD>";

// NTP Client Setup
WiFiUDP udp;
NTPClient timeClient(udp, "pool.ntp.org", 19800, 3600000);

// HC-12 communication pins
const int hc12_tx = 5;
const int hc12_rx = 4;

SoftwareSerial hc12(hc12_rx, hc12_tx); // Create SoftwareSerial object for HC-12

void setup() {
  Serial.begin(115200);
  hc12.begin(9600);

  WiFi.begin(ssid, password);
  while (WiFi.status() != WL_CONNECTED) {
    delay(1000);
    Serial.println("Connecting to WiFi...");
  }

  timeClient.begin();
  Serial.println("NodeMCU B ready to receive and send messages.");
}

void loop() {
  timeClient.update();

  if (hc12.available()) {
    String receivedMessage = hc12.readStringUntil('\n');
    String currentTime = timeClient.getFormattedTime();
    String timestampedMessage = "Receiver [" + currentTime + " IST]: " + receivedMessage;

    Serial.println("Received: " + timestampedMessage);

    hc12.println(timestampedMessage);
    Serial.println("Sent: " + timestampedMessage);
  }
  delay(100);
}
```

## Troubleshooting

1. **Communication Issues**:
   - Ensure the HC-12 modules are within range.
   - Verify that the baud rate of both HC-12 modules is set to 9600 bps.
   - Double-check the wiring of the HC-12 modules (TX/RX pins and voltage levels).

2. **Wi-Fi Connectivity**:
   - Ensure the NodeMCUs are properly connected to the Wi-Fi network with the correct credentials.
   - Use the Serial Monitor to check Wi-Fi connection status.

3. **Message Formatting**:
   - Check if the NTP Client is receiving the correct time.
   - If messages are not being sent/received correctly, check the wiring and baud rates.

## Contributing

Feel free to fork this project, submit pull requests, or open issues if you encounter bugs or have suggestions for improvements. All contributions are welcome!

1. Fork the repository.
2. Create a new branch (`git checkout -b feature-name`).
3. Commit your changes (`git commit -am 'Add new feature'`).
4. Push to the branch (`git push origin feature-name`).
5. Open a pull request.

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

